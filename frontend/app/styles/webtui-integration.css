/* WebTUI Integration with DeepSearchAgents Design Language */

/* CSS Layer Order Definition */
@layer webtui.base, webtui.utils, webtui.components, ds.base, ds.utils, ds.components;

/* WebTUI Base Import */
@import "@webtui/css/base.css" layer(webtui.base);

/* WebTUI Utilities */
@import "@webtui/css/utils/box.css" layer(webtui.utils);
@import "@webtui/css/utils/corners.css" layer(webtui.utils);
@import "@webtui/css/utils/colors.css" layer(webtui.utils);

/* WebTUI Components */
@import "@webtui/css/components/button.css" layer(webtui.components);
@import "@webtui/css/components/typography.css" layer(webtui.components);
@import "@webtui/css/components/input.css" layer(webtui.components);
@import "@webtui/css/components/badge.css" layer(webtui.components);

/* Berkeley Mono Font Stack */
@font-face {
  font-family: 'Berkeley Mono';
  src: local('Berkeley Mono'),
       local('BerkeleyMono-Regular');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Berkeley Mono';
  src: local('Berkeley Mono Bold'),
       local('BerkeleyMono-Bold');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* Terminal-Inspired Color Palette */
@layer ds.base {
  :root {
    /* Terminal Green Theme */
    --terminal-bg: oklch(0.05 0 0);
    --terminal-fg: oklch(0.8 0.15 140);
    --terminal-bright-green: oklch(0.85 0.18 140);
    --terminal-dim-green: oklch(0.6 0.12 140);
    
    /* Terminal Colors */
    --terminal-black: oklch(0.1 0 0);
    --terminal-red: oklch(0.637 0.237 25.331);
    --terminal-green: oklch(0.696 0.17 162.48);
    --terminal-yellow: oklch(0.828 0.189 84.429);
    --terminal-blue: oklch(0.6 0.118 184.704);
    --terminal-magenta: oklch(0.65 0.15 330);
    --terminal-cyan: oklch(0.7 0.12 200);
    --terminal-white: oklch(0.9 0 0);
    
    /* Agent State Colors */
    --agent-planning: var(--terminal-blue);
    --agent-thinking: var(--terminal-yellow);
    --agent-coding: var(--terminal-green);
    --agent-running: var(--terminal-cyan);
    --agent-final: var(--terminal-bright-green);
    --agent-error: var(--terminal-red);
    
    /* Typography */
    --font-mono-stack: 'Berkeley Mono', 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Fira Mono', 'Droid Sans Mono', 'Courier New', monospace;
    
    /* Spacing for Terminal Aesthetic */
    --terminal-padding: 1.25rem;
    --terminal-line-height: 1.6;
    --terminal-letter-spacing: 0.02em;
  }
  
  /* Dark Theme (Default for Terminal) */
  .terminal-theme,
  .dark {
    --background: var(--terminal-bg);
    --foreground: var(--terminal-fg);
    
    --card: oklch(0.08 0 0);
    --card-foreground: var(--terminal-fg);
    
    --primary: var(--terminal-green);
    --primary-foreground: var(--terminal-bg);
    
    --secondary: oklch(0.15 0 0);
    --secondary-foreground: var(--terminal-fg);
    
    --muted: oklch(0.2 0 0);
    --muted-foreground: var(--terminal-dim-green);
    
    --accent: var(--terminal-cyan);
    --accent-foreground: var(--terminal-bg);
    
    --destructive: var(--terminal-red);
    --destructive-foreground: var(--terminal-bg);
    
    --border: oklch(0.25 0 0);
    --input: oklch(0.15 0 0);
    --ring: var(--terminal-green);
  }
  
  /* Alternative Terminal Themes */
  .terminal-theme-solarized {
    --terminal-bg: oklch(0.11 0.05 240);
    --terminal-fg: oklch(0.65 0.05 100);
    --terminal-green: oklch(0.6 0.15 140);
    --terminal-yellow: oklch(0.7 0.15 70);
    --terminal-blue: oklch(0.5 0.15 240);
  }
  
  .terminal-theme-tokyo-night {
    --terminal-bg: oklch(0.12 0.02 250);
    --terminal-fg: oklch(0.8 0.03 250);
    --terminal-green: oklch(0.7 0.15 150);
    --terminal-yellow: oklch(0.8 0.12 90);
    --terminal-blue: oklch(0.6 0.12 220);
  }
}

/* Core Terminal Styles */
@layer ds.base {
  /* Global Terminal Font */
  .terminal-ui {
    font-family: var(--font-mono-stack);
    font-size: 14px;
    line-height: var(--terminal-line-height);
    letter-spacing: var(--terminal-letter-spacing);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Terminal Container */
  .terminal-container {
    background: var(--terminal-bg);
    color: var(--terminal-fg);
    padding: var(--terminal-padding);
    border-radius: 0.5rem;
    border: 1px solid var(--border);
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  }
  
  /* Terminal Cursor Animation */
  @keyframes terminal-blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  
  .terminal-cursor {
    display: inline-block;
    width: 0.5em;
    height: 1.2em;
    background: var(--terminal-fg);
    animation: terminal-blink 1s infinite;
    vertical-align: text-bottom;
  }
  
  /* Agent State Indicators */
  .agent-state-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.25rem 0.75rem;
    border-radius: 0.25rem;
    font-size: 0.875rem;
    font-weight: 500;
    border: 1px solid;
    transition: all 0.2s ease;
  }
  
  .agent-state-badge.planning {
    color: var(--agent-planning);
    border-color: var(--agent-planning);
    background: oklch(from var(--agent-planning) l c h / 0.1);
  }
  
  .agent-state-badge.thinking {
    color: var(--agent-thinking);
    border-color: var(--agent-thinking);
    background: oklch(from var(--agent-thinking) l c h / 0.1);
  }
  
  .agent-state-badge.coding {
    color: var(--agent-coding);
    border-color: var(--agent-coding);
    background: oklch(from var(--agent-coding) l c h / 0.1);
  }
  
  .agent-state-badge.running {
    color: var(--agent-running);
    border-color: var(--agent-running);
    background: oklch(from var(--agent-running) l c h / 0.1);
  }
  
  .agent-state-badge.final {
    color: var(--agent-final);
    border-color: var(--agent-final);
    background: oklch(from var(--agent-final) l c h / 0.1);
  }
  
  /* ASCII Spinner for Active States */
  @keyframes spin-ascii {
    0% { content: "[|]"; }
    25% { content: "[/]"; }
    50% { content: "[-]"; }
    75% { content: "[\\]"; }
    100% { content: "[|]"; }
  }
  
  .agent-spinner::before {
    content: "[|]";
    animation: spin-ascii 0.8s linear infinite;
    font-family: var(--font-mono-stack);
    margin-right: 0.5rem;
  }
  
  /* Tool Call Badges */
  .tool-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.125rem 0.5rem;
    background: oklch(0.15 0 0);
    border: 1px solid oklch(0.25 0 0);
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-family: var(--font-mono-stack);
    color: var(--terminal-fg);
    transition: all 0.15s ease;
  }
  
  .tool-badge:hover {
    background: oklch(0.2 0 0);
    border-color: var(--terminal-green);
    color: var(--terminal-bright-green);
    cursor: pointer;
  }
  
  .tool-badge .tool-icon {
    font-size: 0.875rem;
  }
  
  /* Code Block Styling */
  .terminal-code-block {
    background: oklch(0.08 0 0);
    border: 1px solid oklch(0.2 0 0);
    border-radius: 0.375rem;
    padding: 1rem;
    overflow-x: auto;
    margin: 0.5rem 0;
    position: relative;
  }
  
  .terminal-code-block::before {
    content: "```python";
    position: absolute;
    top: 0.5rem;
    left: 1rem;
    font-size: 0.75rem;
    color: var(--terminal-dim-green);
    font-family: var(--font-mono-stack);
  }
  
  .terminal-code-block code {
    font-family: var(--font-mono-stack);
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--terminal-fg);
  }
  
  /* Message Card Styles */
  .agent-message-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    padding: 1rem;
    margin-bottom: 1rem;
    position: relative;
    transition: all 0.2s ease;
  }
  
  .agent-message-card.active {
    border-color: var(--terminal-green);
    box-shadow: 0 0 0 1px var(--terminal-green);
  }
  
  .agent-message-card::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--border);
    border-radius: 0.5rem 0 0 0.5rem;
    transition: background 0.2s ease;
  }
  
  .agent-message-card.planning::before {
    background: var(--agent-planning);
  }
  
  .agent-message-card.action::before {
    background: var(--agent-coding);
  }
  
  .agent-message-card.final::before {
    background: var(--agent-final);
  }
  
  /* Streaming Text Effect */
  .streaming-text {
    position: relative;
  }
  
  .streaming-text::after {
    content: "";
    display: inline-block;
    width: 0.5em;
    height: 1em;
    background: var(--terminal-fg);
    animation: terminal-blink 1s infinite;
    margin-left: 0.1em;
    vertical-align: text-bottom;
  }
}

/* Utility Classes */
@layer ds.utils {
  /* Text Colors */
  .text-terminal-green { color: var(--terminal-green); }
  .text-terminal-yellow { color: var(--terminal-yellow); }
  .text-terminal-blue { color: var(--terminal-blue); }
  .text-terminal-red { color: var(--terminal-red); }
  .text-terminal-cyan { color: var(--terminal-cyan); }
  
  /* Background Colors */
  .bg-terminal-black { background-color: var(--terminal-black); }
  .bg-terminal-dark { background-color: oklch(0.08 0 0); }
  
  /* Border Colors */
  .border-terminal-green { border-color: var(--terminal-green); }
  .border-terminal-dim { border-color: oklch(0.2 0 0); }
  
  /* Font Utilities */
  .font-terminal { font-family: var(--font-mono-stack); }
  
  /* Animation Utilities */
  .animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
  }
  
  @keyframes pulse-subtle {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }
}

/* Component Overrides for Terminal Style */
@layer ds.components {
  /* Override shadcn button for terminal style */
  .terminal-button {
    font-family: var(--font-mono-stack);
    background: oklch(0.15 0 0);
    color: var(--terminal-fg);
    border: 1px solid oklch(0.25 0 0);
    padding: 0.5rem 1rem;
    border-radius: 0.25rem;
    transition: all 0.15s ease;
    cursor: pointer;
  }
  
  .terminal-button:hover {
    background: oklch(0.2 0 0);
    border-color: var(--terminal-green);
    color: var(--terminal-bright-green);
  }
  
  .terminal-button:active {
    background: oklch(0.25 0 0);
  }
  
  /* Terminal Input */
  .terminal-input {
    font-family: var(--font-mono-stack);
    background: oklch(0.08 0 0);
    color: var(--terminal-fg);
    border: 1px solid oklch(0.2 0 0);
    padding: 0.5rem 0.75rem;
    border-radius: 0.25rem;
    transition: all 0.15s ease;
  }
  
  .terminal-input:focus {
    outline: none;
    border-color: var(--terminal-green);
    box-shadow: 0 0 0 1px var(--terminal-green);
  }
  
  /* Terminal Select */
  .terminal-select {
    font-family: var(--font-mono-stack);
    background: oklch(0.08 0 0);
    color: var(--terminal-fg);
    border: 1px solid oklch(0.2 0 0);
    padding: 0.5rem 0.75rem;
    border-radius: 0.25rem;
    transition: all 0.15s ease;
  }
}